<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/c45d543d64.js" crossorigin="anonymous"></script>
</head>

<style>
    body {

        background-color: rgb(43, 43, 43);

        margin: 0;

        --rX: 0;
        --rY: 0;
        --rZ: 0;
        --rDeg: 0deg;
        --x: -60vmin;
        --y: -200vh;
        --z: 170vh;
        --S: calc(var(--x) + var(--y) + var(--z));


    }



    @keyframes hMove {
        0% {
            transform: 
            perspective(1000px)
             translateX(0) 
             translateY(0) 
             translateZ(-3000px) 
             rotateX(10deg) 
             rotateY(-10deg);

        }

        100% {
            transform: 
            perspective(1000px) 
            translateX(var(--x)) 
            translateY(var(--y)) 
            translateZ(-3000px) 
            rotateX(10deg) 
            rotateY(-10deg);

        }

        /* 100% {
            transform: 
            perspective(1000px) 
            translateX(calc(var(--x) + var(--x) / 20)) 
            translateY(calc(var(--y) + var(--y) / 20)) 
            translateZ(-3000px) 
            rotateX(10deg) 
            rotateY(-10deg);

        } */
    }

    @keyframes vMove {
        0% {
            transform: translateZ(0px);
        }

        50% {
            transform: translateZ(var(--z));
        }



        100% {
            transform: translateZ(-1vh);
        }
    }

    @keyframes rotate {
        0% {
            transform: 
            rotateZ(0deg)
            rotateX(0deg)
            rotateY(0deg)
            

            /* transform: rotate3d(var(--rX), var(--rY), var(--rZ), 0deg); */

        }


        100% {
            transform: 
            rotateZ(var(--rZ))
            rotateX(var(--rY))
            rotateY(var(--rX))
            

            /* transform: rotate3d(var(--rX), var(--rY), var(--rZ), var(--rDeg)); */
        }


    }

    /* @keyframes rotate-fadeout {
        0% {
            transform: 
            rotateX(240deg)
            rotateY(190deg)
            rotateZ(0deg)



        }
        100% {
            transform: 
            rotateX(180deg)
            rotateY(180deg)
            rotateZ(720deg)

        }
    } */

    @keyframes spin {
        0% {
            transform: perspective(1000px) translateZ(-2000px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
        }

        100% {
            transform: perspective(1000px) translateZ(-2000px) rotateX(720deg) rotateY(2520deg) rotateZ(2160deg);
        }
    }




    .hMove {

        --x: -60vmin;
        --y: -200vh;


        --w: 70vmin;
        --h: 70vmin;
        position: absolute;
        left: calc(50% - var(--w) / 2);
        top: calc(70% - var(--h) / 2);
        width: var(--w);
        height: var(--h);
        /* border: 5px solid rgb(255, 255, 255); */
        transform-origin: center center -35vmin;
        transform-style: preserve-3d;
        /* animation: hMove 0.8s linear; */
        animation-fill-mode: forwards;
        backface-visibility: hidden;
        transform: perspective(1000px) translateZ(-3000px) rotateX(10deg) rotateY(-10deg) ;

    }

    .vMove {
        --z: 170vh;

        --w: 100%;
        --h: 100%;
        position: absolute;
        width: var(--w);
        height: var(--h);
        transform-origin: center center -35vmin;
        transform-style: preserve-3d;
        /* animation: vMove 0.8s ease-in-out; */
        /* border: 5px solid rgb(255, 255, 255); */
        backface-visibility: hidden;
    }

    .Box3D {

        --rX: -0.1;
        --rY: 0.5;
        --rZ: 0.7;
        --rDeg: 1440deg;

        --w: 100%;
        --h: 100%;
        position: absolute;
        width: var(--w);
        height: var(--h);
        /* border: 5px solid rgb(0, 0, 0); */
        /* transform-origin:100px 100px -100px ; */
        transform-origin: center center -35vmin;
        transform-style: preserve-3d;
        /* backface-visibility: hidden; */
        /* animation: rotate 2.5s ease-out forwards; */

        /* animation: spin 34s linear infinite; */
        /* transform: rotateY(-90deg); */
        /* animation: move 3s linear;         */
    }

    .Box3D>div {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        backface-visibility: hidden;
        font-size: 50px;
        font-family: 'Courier New', Courier, monospace;
        font-weight: bold;
        text-align: center;
        line-height: 100vh;
        color: azure;
        background-color: rgb(217, 224, 230);
        background: radial-gradient(circle at 120px 80px, #ffffff, rgba(244, 250, 255, 0.699));
        border: 1px solid black;


    }

    .back {
        /* background-color: rgba(0, 255, 115, 0.774);  */
        transform: translateZ(-70vmin) rotateX(-180deg);

    }



    .left {
        transform-origin: left center;
        /* background-color: rgb(197, 65, 250); */
        transform: translateZ(-70vmin) rotateY(-90deg);

    }

    .right {
        transform-origin: right center;
        /* background-color: rgb(240, 157, 49); */
        transform: translateZ(-70vmin) rotateY(90deg);


    }

    .bottom {
        transform-origin: top center;
        /* background-color: rgba(5, 115, 158, 0.884); */
        transform: translateZ(-70vmin) rotateX(90deg);

    }

    .top {
        transform-origin: bottom center;
        /* background-color: rgba(158, 5, 38, 0.829); */
        transform: translateZ(-70vmin) rotateX(-90deg);

    }

    body {
        --dice: 15vmin
    }


    .one {
        position: absolute;
        left: calc(50% - var(--dice) / 2);
        top: calc(50% - var(--dice) / 2);
        ;
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: brown;
    }

    .two:nth-child(1) {
        position: absolute;
        left: calc(25% - var(--dice) / 2);
        top: calc(25% - var(--dice) / 2);
        ;
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);

    }

    .two:nth-child(2) {
        position: absolute;
        left: calc(75% - var(--dice) / 2);
        top: calc(75% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .three:nth-child(1) {
        position: absolute;
        left: calc(75% - var(--dice) / 2);
        top: calc(75% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .three:nth-child(2) {
        position: absolute;
        left: calc(50% - var(--dice) / 2);
        top: calc(50% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .three:nth-child(3) {
        position: absolute;
        left: calc(25% - var(--dice) / 2);
        top: calc(25% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .four:nth-child(1) {
        position: absolute;
        left: calc(25% - var(--dice) / 2);
        top: calc(25% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .four:nth-child(2) {
        position: absolute;
        left: calc(75% - var(--dice) / 2);
        top: calc(25% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .four:nth-child(3) {
        position: absolute;
        left: calc(25% - var(--dice) / 2);
        top: calc(75% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .four:nth-child(4) {
        position: absolute;
        left: calc(75% - var(--dice) / 2);
        top: calc(75% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .five:nth-child(1) {
        position: absolute;
        left: calc(25% - var(--dice) / 2);
        top: calc(25% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .five:nth-child(2) {
        position: absolute;
        left: calc(75% - var(--dice) / 2);
        top: calc(25% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .five:nth-child(3) {
        position: absolute;
        left: calc(25% - var(--dice) / 2);
        top: calc(75% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .five:nth-child(4) {
        position: absolute;
        left: calc(75% - var(--dice) / 2);
        top: calc(75% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .five:nth-child(5) {
        position: absolute;
        left: calc(50% - var(--dice) / 2);
        top: calc(50% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .six:nth-child(1) {
        position: absolute;
        left: calc(33% - var(--dice) / 2);
        top: calc(20% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .six:nth-child(2) {
        position: absolute;
        left: calc(66% - var(--dice) / 2);
        top: calc(20% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .six:nth-child(3) {
        position: absolute;
        left: calc(33% - var(--dice) / 2);
        top: calc(50% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .six:nth-child(4) {
        position: absolute;
        left: calc(66% - var(--dice) / 2);
        top: calc(50% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .six:nth-child(5) {
        position: absolute;
        left: calc(33% - var(--dice) / 2);
        top: calc(80% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .six:nth-child(6) {
        position: absolute;
        left: calc(66% - var(--dice) / 2);
        top: calc(80% - var(--dice) / 2);
        width: var(--dice);
        height: var(--dice);
        border-radius: 50%;
        background-color: rgb(0, 0, 0);
    }

    .button {
        position: fixed;
        margin: 0;
        width: 20vmin;
        height: 20vmin;
        left: calc(50vw - 10vmin);
        top: 80vh;
        border-radius: 50%;
        margin-bottom: 10vh;

        color: #4db7fdda;
        font-size: 20vmin;
        cursor: pointer;


    }

    .help {
        position: fixed;
        margin: 1vmin;
        right: 0;
        width: 8vmin;
        height: 8vmin;
        color: #4db7fdda;
        font-size: 8vmin;
        cursor: pointer;

    }

    .helpBox{
        position: fixed;
        opacity: 0.96;
        width: 80vw;
        height: 80vh;
        background-color: aliceblue;
        left: 10vw;
        top: 10vw;
        border-radius: 3vmin;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* .phone{
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .phone>i{
        position: absolute;
        width: 30vmin;
        height: 30vmin;
        font-size: 30vmin;
        left: calc( 50% - 10vmin);        
        transform: perspective(1000px) rotateX(55deg) rotateZ(-25deg);   

    }

    .rotate{
        position: absolute;
        width: 50vmin;
        height: 50vmin;
        font-size: 60vmin;
        left: calc( 30% - 10vmin); 
        color: rgb(0, 140, 255);
               
        

    } */


</style>


<body>


    <div class="surface">
        <div class="hMove">
            <div class="vMove">
                <div class="Box3D">
                    <div class="back">
                        <div class="one"></div>
                    </div>

                    <div class="front">
                        <div class="two"></div>
                        <div class="two"></div>
                    </div>

                    <div class="top">
                        <div class="three"></div>
                        <div class="three"></div>
                        <div class="three"></div>
                    </div>

                    <div class="bottom">
                        <div class="four"></div>
                        <div class="four"></div>
                        <div class="four"></div>
                        <div class="four"></div>
                    </div>
                    <div class="left">
                        <div class="five"></div>
                        <div class="five"></div>
                        <div class="five"></div>
                        <div class="five"></div>
                        <div class="five"></div>
                    </div>
                    <div class="right">
                        <div class="six"></div>
                        <div class="six"></div>
                        <div class="six"></div>
                        <div class="six"></div>
                        <div class="six"></div>
                        <div class="six"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div onclick="start()" class="button">
        <i class="fa-solid fa-circle-play"></i>
    </div>

    <div class="help">
        <i class="fa-solid fa-question"></i>
    </div>

    <!-- <div class="helpBox">
        <div class="rotate">
            <i class="fa-solid fa-arrows-rotate"></i>
        </div>
        <div class="phone">
            <i class="fa-solid fa-mobile-screen-button"></i>            
        </div>

    </div> -->


</body>

<script>

    // var x = -60
    // var y = -200
    // var z = 170
    // var rX = 0.1
    // var rY = 0.5
    // var rZ = 0.7
    // var rDeg = 1440
    // var dT = 0.8
    // var dsT = 2.5

    var x = 0
    var y = 0
    var z = 0
    var rX = 0
    var rY = 0
    var rZ = 0
    var rDeg = 0
    var dT = 0
    var dsT = 0

    
    function getRandom(rnd) {
        var pNum = Math.floor(Math.random() * rnd)
        var nNum = -1 * Math.floor(Math.random() * rnd)



        if (Math.abs(pNum) >= Math.abs(nNum)) return pNum
        return nNum

    }

    function getPN(){

        var Temp = Math.random()
        if(Temp>0.45) return +1
        if(Temp<=0.45) return -1

    }
    
    function rolling() {
        document.querySelector(".hMove").style.setProperty("animation", "none")
        document.querySelector(".vMove").style.setProperty("animation", "none")
        document.querySelector(".Box3D").style.setProperty("animation", "none")

        window.setTimeout(function () {

            //console.log("x:" + x + ";y:" + y + "z:" + z + ";rX:" + rX + "rY:" + rY + ";rZ:" + rZ + ";rDeg:" + rDeg)



            document.querySelector(".hMove").style.setProperty("--x", x + "vw")
            document.querySelector(".hMove").style.setProperty("--y", y + "vh")

            document.querySelector(".vMove").style.setProperty("--z", z + "vh")


            document.querySelector(".Box3D").style.setProperty("--rX", rX + "deg")
            document.querySelector(".Box3D").style.setProperty("--rY", rY + "deg")
            document.querySelector(".Box3D").style.setProperty("--rZ", rZ + "deg")
            document.querySelector(".Box3D").style.setProperty("--rDeg", rDeg + "deg")

            document.querySelector(".hMove").style.setProperty("animation", "hMove " + dT + "s linear forwards")
            document.querySelector(".vMove").style.setProperty("animation", "vMove " + dT + "s ease-in-out")
            document.querySelector(".Box3D").style.setProperty("animation", "rotate " + dsT + "s ease-out forwards")

            // window.setTimeout(function(){
            //     console.log(123)
            //     document.querySelector(".Box3D").style.setProperty("animation", "rotate-fadeout " + dsT + "s ease-out forwards")
            // },dT*1000)
        }, 10)


    }

    window.addEventListener("deviceorientation", function (event){
        rDeg = event.beta  //90-left;90+right
    },false)

    window.addEventListener('devicemotion', function (event) {

        var ax = event.acceleration.x,
            ay = event.acceleration.y,
            az = event.acceleration.z;

            if(az>3.5 & ay>6.5){
                if(ax>19){
                    ax = 20
                }
                if(ax<-19){
                    ax = -20
                }
                if(ay>19){
                    ay = 20
                }
                if(az>19){
                    az = 20
                }
                rDeg = rDeg - 90


                //20 max ; 7 min                   

                x = 140 * rDeg / 45
                y = -1 * 240 * ay / 20
                z = 220 * az / 20
                rX = getRandom(5) * 90//getRandom(100) / 100
                rY = getRandom(5) * 90//getRandom(100) / 100
                rZ = getPN() * (720 + Math.abs(getRandom(1520)) * (ay + az) / 40)  //getRandom(100) / 100

                dT = 0.8
                dsT = 2.5

                rolling()
            }


    },false)









    function start() {

        y = -1 * Math.abs(getRandom(240))
        x = getRandom(140)
        z = 100 + Math.abs(getRandom(120))
        rX = getRandom(5) * 90//getRandom(100) / 100
        rY = getRandom(5) * 90//getRandom(100) / 100
        rZ = getPN() * (720 + Math.abs(getRandom(1220)))//getRandom(100) / 100
        rDeg = 720 + Math.abs(getRandom(18)) * 45//1440
        dT = 0.8
        dsT = 2.5

        rolling()

    }



</script>

</html>
